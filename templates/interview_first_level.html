{% extends "home.html" %}
{% block content %}
{% include "navbar.html" %}

<div class="min-h-screen bg-blue-50 py-16 px-6">

  <div class="max-w-2xl mx-auto bg-white shadow-xl rounded-2xl p-8">
    
    <h2 class="text-3xl font-bold text-blue-700 mb-6 text-center">
      üìù Quiz Interview ‚Äì Level 1
    </h2>

    <form id="quizForm" method="POST">
      {% csrf_token %}

      {% for q in quiz %}
      <div class="mb-6">
        <p class="font-semibold text-gray-800 mb-2">
          {{ forloop.counter }}. {{ q.question }}
        </p>

        <div class="space-y-2">
          {% for opt in q.options %}
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" 
                   name="q{{ forloop.parentloop.counter0 }}" 
                   value="{{ opt }}"
                   class="h-4 w-4">
            <span class="text-gray-700">{{ opt }}</span>
          </label>
          {% endfor %}
        </div>
      </div>
      {% endfor %}

      <button type="submit"
              class="w-full bg-blue-600 text-white py-3 rounded-xl font-semibold hover:bg-blue-700 transition">
        Submit Quiz
      </button>
    </form>

    <div id="result" class="text-center mt-6 text-lg font-bold text-green-600"></div>

  </div>
</div>

<script>
document.getElementById("quizForm").addEventListener("submit", async function(e){
  e.preventDefault();
  let formData = new FormData(this);
  let response = await fetch("{% url 'submit_quiz' %}", { method:"POST", body: formData });
  let data = await response.json();
  document.getElementById("result").innerText =
    "You scored " + data.score + " out of " + data.total;
});
</script>

{% endblock %}
